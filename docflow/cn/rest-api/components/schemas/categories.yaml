Category:
  type: object
  description: 文件类别
  properties:
    id:
      type: string
      description: 文件类别ID
      example: "1234567890"
    name:
      type: string
      description: 文件类别名称
      example: "发票"
    category_prompt:
      type: string
      description: 用于分类的提示词
      example: "增值税发票，包含发票代码、发票号码等字段"
    extract_model:
      description: 抽取模型
      example: "llm"
      enum:
        - llm
        - vlm
    enabled:
      $ref: '#/EnabledStatus'
  required:
    - id
    - name

CategoryFieldConfig:
  type: object
  properties:
    name:
      type: string
      description: 字段名称
      example: 发票代码
    description:
      type: string
      description: 字段描述
      example: 发票代码描述
    prompt:
      type: string
      description: 语义抽取提示词
    use_prompt:
      type: boolean
      description: 是否使用语义提示词
    alias:
      type: array
      description: 字段别名
      items:
        type: string
    identity:
      type: string
      description: 导出字段名
    multi_value:
      type: boolean
      description: 是否多值抽取
    duplicate_value_distinct:
      type: boolean
      description: 是否重复值去重，仅当 multi_value 为 true 时有效
    transform_settings:
      type: object
      description: 转换配置
      properties:
        type:
          type: string
          description: 转换类型
          enum:
            - text
            - number
            - datetime
            - enumerate
            - regex
        text_settings:
          type: object
          description: 文本类型转换配置
          properties:
            strip:
              type: array
              description: |
                去除的字符列表，值为枚举key。可选的枚举值：
                - remove_text_default_white_space: "空格" (en: "white space")
                - remove_text_default_comma: "，" (en: "，")
                - remove_text_default_full_stop: "。" (en: "。")
                - remove_text_default_full_stop_half_width: "." (en: ".")
                - remove_text_default_semicolon: "；" (en: "；")
                - remove_text_default_dun_hao: "、" (en: "、")
                - remove_text_default_colon: "：" (en: "：")
                - remove_text_default_slash: "/" (en: "/")
                - remove_text_default_ampersand: "&" (en: "&")
                - remove_text_default_vertical_bar: "|" (en: "|")
              items:
                type: string
                enum:
                  - remove_text_default_white_space
                  - remove_text_default_comma
                  - remove_text_default_full_stop
                  - remove_text_default_full_stop_half_width
                  - remove_text_default_semicolon
                  - remove_text_default_dun_hao
                  - remove_text_default_colon
                  - remove_text_default_slash
                  - remove_text_default_ampersand
                  - remove_text_default_vertical_bar
              example:
                - remove_text_default_white_space
                - remove_text_default_comma
        number_settings:
          type: object
          description: 数字类型转换配置
          properties:
            format:
              type: string
              description: 输出格式
              enum:
                - normal
                - percentage
                - chinese_amount
            unit_remove:
              type: array
              description: |
                单位去除列表，值为枚举key。可选的枚举值：
                - unit_remove_default_yuan_one: "元" (en: "元")
                - unit_remove_default_yuan_two: "¥" (en: "¥")
                - unit_remove_default_yuan_three: "RMB" (en: "RMB")
                - unit_remove_default_yuan_four: "CNY" (en: "CNY")
                - unit_remove_default_dollar_one: "美元" (en: "美元")
                - unit_remove_default_dollar_two: "$" (en: "$")
                - unit_remove_default_dollar_three: "USD" (en: "USD")
                - unit_remove_default_euro_one: "€" (en: "€")
                - unit_remove_default_euro_two: "EUR" (en: "EUR")
                - unit_remove_default_gbp_one: "£" (en: "£")
                - unit_remove_default_gbp_two: "GBP" (en: "GBP")
                - unit_remove_default_jpy_one: "JPY" (en: "JPY")
              items:
                type: string
                enum:
                  - unit_remove_default_yuan_one
                  - unit_remove_default_yuan_two
                  - unit_remove_default_yuan_three
                  - unit_remove_default_yuan_four
                  - unit_remove_default_dollar_one
                  - unit_remove_default_dollar_two
                  - unit_remove_default_dollar_three
                  - unit_remove_default_euro_one
                  - unit_remove_default_euro_two
                  - unit_remove_default_gbp_one
                  - unit_remove_default_gbp_two
                  - unit_remove_default_jpy_one
              example:
                - unit_remove_default_yuan_one
                - unit_remove_default_dollar_two
            simplified_chinese:
              type: string
              description: |
                中文简写，值为枚举key。可选的枚举值：
                - number_simplified_chinese_hundred: "百" (en: "hundred")
                - number_simplified_chinese_thousand: "千" (en: "thousand")
                - number_simplified_chinese_ten_thousand: "万" (en: "ten thousand")
                - number_simplified_chinese_million: "百万" (en: "million")
                - number_simplified_chinese_ten_million: "千万" (en: "ten million")
                - number_simplified_chinese_billion: "亿" (en: "billion")
              enum:
                - number_simplified_chinese_hundred
                - number_simplified_chinese_thousand
                - number_simplified_chinese_ten_thousand
                - number_simplified_chinese_million
                - number_simplified_chinese_ten_million
                - number_simplified_chinese_billion
              example: number_simplified_chinese_hundred
            simplified_english:
              type: string
              description: |
                英文简写，值为枚举key。可选的枚举值：
                - number_simplified_english_k: "k" (en: "k")
                - number_simplified_english_m: "m" (en: "m")
                - number_simplified_english_b: "b" (en: "b")
              enum:
                - number_simplified_english_k
                - number_simplified_english_m
                - number_simplified_english_b
              example: number_simplified_english_k
            decimal_places:
              type: integer
              description: 保留小数位数
              example: 2
            omit_trailing_zeros:
              type: boolean
              description: 省去末尾的0
            thousand_separator:
              type: boolean
              description: 显示千位分隔符
            chinese_case:
              type: string
              description: 中文金额大小写
              enum:
                - upper
                - lower
        datetime_settings:
          type: object
          description: 时间类型转换配置
          properties:
            format_type:
              type: string
              description: |
                日期时间格式类型，值为枚举key。可选的枚举值：
                - time_format_one: "D/M/YYYY" (en: "D/M/YYYY")
                - time_format_two: "YYYY/M/D" (en: "YYYY/M/D")
                - time_format_three: "MM/DD/YYYY" (en: "MM/DD/YYYY")
                - time_format_four: "YYYY/MM/DD" (en: "YYYY/MM/DD")
                - time_format_five: "YYYY-MM-DD" (en: "YYYY-MM-DD")
                - time_format_six: "DD.MM.YY" (en: "DD.MM.YY")
                - time_format_seven: "YYYY年MM月DD日" (en: "YYYY年MM月DD日")
                - time_format_eight: "二零二三年十月二十七日" (en: "二零二三年十月二十七日")
                - time_format_nine: "YYYY年MM月DD日 HH时mm分ss秒" (en: "YYYY年MM月DD日 HH时mm分ss秒")
                - time_format_ten: "MM月DD日 HH时mm分ss秒" (en: "MM月DD日 HH时mm分ss秒")
                - time_format_eleven: "Month DDst/nd/rd/th, YYYY" (en: "Month DDst/nd/rd/th, YYYY")
                - time_format_twelve: "DDst/nd/rd/th Month, YYYY" (en: "DDst/nd/rd/th Month, YYYY")
                - time_format_custom: "自定义" (en: "custom")
              enum:
                - time_format_one
                - time_format_two
                - time_format_three
                - time_format_four
                - time_format_five
                - time_format_six
                - time_format_seven
                - time_format_eight
                - time_format_nine
                - time_format_ten
                - time_format_eleven
                - time_format_twelve
                - time_format_custom
              example: time_format_five
            custom_format:
              type: string
              description: 自定义格式字符串，仅当 format_type 为 time_format_custom 时使用
              example: YYYY-MM-DD HH:mm:ss
        enumerate_settings:
          type: object
          description: 枚举类型转换配置
          properties:
            items:
              type: array
              description: 可选枚举值列表
              items:
                type: string
              example:
                - 选项1
                - 选项2
                - 选项3
            mismatch_action:
              type: object
              description: 字段值不匹配时的处理动作
              properties:
                mode:
                  type: string
                  description: 不匹配时的处理模式
                  enum:
                    - default
                    - warning
                default_value:
                  type: string
                  description: 当模式为 default 时使用的默认值
        regex_settings:
          type: object
          description: 正则类型转换配置
          properties:
            match:
              type: string
              description: 匹配用的正则表达式
              example: ^\d{4}-\d{2}-\d{2}$
            replace:
              type: string
              description: 替换用的正则表达式
              example: $1-$2-$3
        mismatch_action:
          type: object
          description: 字段值不匹配时的处理动作（已废弃，请使用 enumerate_settings.mismatch_action）
          deprecated: true
          properties:
            mode:
              type: string
              description: 不匹配时的处理模式
              enum:
                - default
                - warning
            default_value:
              type: string
              description: 当模式为 default 时使用的默认值

CategoryField:
  allOf:
    - $ref: '#/CategoryFieldConfig'
    - type: object
      properties:
        id:
          type: string
          description: 字段ID
          example: "1234567890"

CategorySample:
  type: object
  description: 文件类别样本
  properties:
    sample_id:
      type: string
      description: 样本ID
      example: "1234567890"
    file_name:
      type: string
      description: 文件名
      example: "invoice_sample.pdf"
  required:
    - sample_id
    - file_name

EnabledStatus:
  type: integer
  description: |
    启用状态
    - 0: 禁用
    - 1: 启用
    - 2: 草稿
  enum:
    - 0
    - 1
    - 2
