/api/app-api/sip/platform/v2/workspace/create:
  post:
    summary: 创建空间
    description: 创建一个新的工作空间
    operationId: createWorkspace
    tags:
      - 空间管理
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              name:
                type: string
                description: 空间名称
                example: "我的工作空间"
                maxLength: 50
              description:
                type: string
                description: 空间描述
                example: "这是一个用于处理发票的工作空间"
                maxLength: 200
              enterprise_id:
                type: integer
                format: int64
                description: 企业组织ID
                example: 12345
              manage_account_id:
                type: integer
                format: int64
                description: 空间管理员id
                example: 67890
              account_id:
                type: integer
                format: int64
                description: 当前账号ID
                example: 98765
              auth_scope:
                type: integer
                description: "协作范围 0:仅自己可见 1:企业成员可见"
                example: 1
                enum:
                  - 0
                  - 1
              enable_mail_collection_status:
                type: boolean
                description: "启用邮箱收票状态 false:禁用 true:启用"
                example: true
              mail_inbox_address:
                type: string
                description: 收件箱地址
                example: "workspace@example.com"
              init_status:
                type: boolean
                description: 是否为初始化空间
                default: false
                example: false
              workspace_type:
                type: integer
                description: "工作空间类型 0：个人 1：团队"
                example: 1
                enum:
                  - 0
                  - 1
              demo_status:
                type: integer
                description: "是否为demo工作空间 0：否 1：是"
                default: 0
                example: 0
                enum:
                  - 0
                  - 1
              task_clone_flag:
                type: boolean
                description: 是否复制任务数据
                default: false
                example: false
              review_clone_flag:
                type: boolean
                description: 是否复制审核配置
                default: false
                example: false
            required:
              - name
              - enterprise_id
              - manage_account_id
              - account_id
              - auth_scope
              - enable_mail_collection_status
              - workspace_type
              - demo_status
    responses:
      '200':
        description: 成功创建空间
        content:
          application/json:
            schema:
              allOf:
                - $ref: '../components/schemas/common.yaml#/CodeMessage'
                - type: object
                  properties:
                    result:
                      type: object
                      properties:
                        workspace_id:
                          type: string
                          description: 空间ID
                          example: "1234567890"

/api/app-api/sip/platform/v2/workspace/list:
  get:
    summary: 获取空间列表
    description: 获取当前用户的所有工作空间列表
    operationId: listWorkspaces
    tags:
      - 空间管理
    parameters:
      - name: page
        in: query
        description: 页码
        required: false
        schema:
          type: integer
          default: 1
          example: 1
      - name: page_size
        in: query
        description: 每页数量
        required: false
        schema:
          type: integer
          default: 20
          example: 20
    responses:
      '200':
        description: 成功获取空间列表
        content:
          application/json:
            schema:
              allOf:
                - $ref: '../components/schemas/common.yaml#/CodeMessage'
                - type: object
                  properties:
                    result:
                      type: object
                      properties:
                        total:
                          type: integer
                          description: 空间总数
                          example: 100
                        page:
                          type: integer
                          description: 当前页码
                          example: 1
                        page_size:
                          type: integer
                          description: 每页数量
                          example: 20
                        workspaces:
                          type: array
                          items:
                            $ref: '../components/schemas/workspaces.yaml#/Workspace'

/api/app-api/sip/platform/v2/workspace/get:
  get:
    summary: 获取空间详情
    description: 根据空间ID获取空间详细信息
    operationId: getWorkspace
    tags:
      - 空间管理
    parameters:
      - name: workspace_id
        in: query
        description: 空间ID
        required: true
        schema:
          type: string
          example: "1234567890"
    responses:
      '200':
        description: 成功获取空间详情
        content:
          application/json:
            schema:
              allOf:
                - $ref: '../components/schemas/common.yaml#/CodeMessage'
                - type: object
                  properties:
                    result:
                      $ref: '../components/schemas/workspaces.yaml#/Workspace'

/api/app-api/sip/platform/v2/workspace/update:
  post:
    summary: 更新空间
    description: 更新指定空间的信息
    operationId: updateWorkspace
    tags:
      - 空间管理
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              workspace_id:
                type: string
                description: 空间ID
                example: "1234567890"
              name:
                type: string
                description: 空间名称
                example: "我的工作空间"
                maxLength: 50
              description:
                type: string
                description: 空间描述
                example: "这是一个用于处理发票的工作空间"
                maxLength: 200
              auth_scope:
                type: integer
                description: "协作范围 0:仅自己可见 1:企业成员可见"
                example: 1
                enum:
                  - 0
                  - 1
              enable_mail_collection_status:
                type: boolean
                description: "启用邮箱收票状态 false:禁用 true:启用"
                example: true
              mail_inbox_address:
                type: string
                description: 收件箱地址
                example: "workspace@example.com"
              workspace_type:
                type: integer
                description: "工作空间类型 0：个人 1：团队"
                example: 1
                enum:
                  - 0
                  - 1
              callback_url:
                type: string
                description: 回调URL
                example: "https://example.com/callback"
              callback_retry_time:
                type: integer
                description: 回调重试次数
                example: 3
                minimum: 0
                maximum: 3
            required:
              - workspace_id
              - name
              - auth_scope
              - enable_mail_collection_status
              - workspace_type
    responses:
      '200':
        description: 成功更新空间
        content:
          application/json:
            schema:
              $ref: '../components/schemas/common.yaml#/CodeMessage'

/api/app-api/sip/platform/v2/workspace/delete:
  post:
    summary: 删除空间
    description: 删除指定的工作空间
    operationId: deleteWorkspace
    tags:
      - 空间管理
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              workspace_ids:
                type: array
                items:
                  type: string
                  description: 空间ID
                  example: "1234567890"
                description: 要删除的空间ID列表
            required:
              - workspace_ids
    responses:
      '200':
        description: 成功删除空间
        content:
          application/json:
            schema:
              $ref: '../components/schemas/common.yaml#/CodeMessage'
